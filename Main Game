<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Clicker desde Cero</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4e4bc; text-align: center; color: #333; }
        #cookie { width: 200px; height: 200px; cursor: pointer; border-radius: 50%; background: #d2691e; margin: 20px auto; transition: transform 0.1s; }
        #cookie:active { transform: scale(0.95); }
        #count { font-size: 48px; font-weight: bold; margin: 20px; }
        #cps { font-size: 24px; color: #666; }
        .upgrades { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin: 20px; }
        .upgrade { background: #fff; border: 2px solid #ddd; padding: 15px; border-radius: 10px; cursor: pointer; min-width: 150px; }
        .upgrade:hover { border-color: #ffcc00; }
        .upgrade.disabled { opacity: 0.5; cursor: not-allowed; }
        #reincarnate { background: #ff4444; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 18px; margin: 20px; }
        #reincarnate:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>
    <h1>游꼵 Cookie Clicker</h1>
    <div id="cookie" onclick="clickCookie()">游꼵</div>
    <div id="count">0</div>
    <div id="cps">0 cookies/seg</div>
    
    <div class="upgrades" id="upgrades"></div>
    
    <button id="reincarnate" onclick="reincarnate()" disabled>Reencarnar (0 puntos)</button>
    
    <script>
        let game = {
            cookies: 0,
            cps: 0, // cookies per second
            multi: 1, // multiplicador de reencarnaci칩n
            points: 0, // puntos de reencarnaci칩n
            upgrades: {
                cursor: { qty: 0, price: 15, cps: 0.1, name: 'Cursor', desc: 'Clics +10%' },
                grandma: { qty: 0, price: 100, cps: 1, name: 'Abuela', desc: 'Cookies autom치ticas' },
                farm: { qty: 0, price: 1100, cps: 8, name: 'Granja', desc: 'M치s cookies autom치ticas' }
            }
        };

        // Cargar progreso
        if (localStorage.getItem('cookieGame')) {
            game = JSON.parse(localStorage.getItem('cookieGame'));
        }

        function saveGame() {
            localStorage.setItem('cookieGame', JSON.stringify(game));
        }

        function clickCookie() {
            game.cookies += 1 + (game.upgrades.cursor.qty * 0.1);
            updateDisplay();
        }

        function buyUpgrade(type) {
            const up = game.upgrades[type];
            if (game.cookies >= up.price) {
                game.cookies -= up.price;
                up.qty++;
                up.price = Math.floor(up.price * 1.15); // Aumenta precio
                calculateCPS();
                updateDisplay();
                saveGame();
            }
        }

        function calculateCPS() {
            game.cps = 0;
            game.cps += game.upgrades.cursor.qty * game.upgrades.cursor.cps;
            game.cps += game.upgrades.grandma.qty * game.upgrades.grandma.cps;
            game.cps += game.upgrades.farm.qty * game.upgrades.farm.cps;
            game.cps *= game.multi;
        }

        function produceAuto() {
            game.cookies += game.cps;
            updateDisplay();
            saveGame();
        }

        function updateDisplay() {
            document.getElementById('count').textContent = Math.floor(game.cookies).toLocaleString();
            document.getElementById('cps').textContent = game.cps.toFixed(1) + ' cookies/seg';
            
            const upgradesDiv = document.getElementById('upgrades');
            upgradesDiv.innerHTML = '';
            Object.keys(game.upgrades).forEach(type => {
                const up = game.upgrades[type];
                const div = document.createElement('div');
                div.className = 'upgrade' + (game.cookies < up.price ? ' disabled' : '');
                div.innerHTML = `
                    <strong>${up.name}</strong><br>
                    Cantidad: ${up.qty}<br>
                    Precio: ${Math.floor(up.price).toLocaleString()}<br>
                    ${up.desc}<br>
                    <small>+${up.cps.toFixed(1)}/seg</small>
                `;
                div.onclick = () => buyUpgrade(type);
                upgradesDiv.appendChild(div);
            });

            // Reencarnar
            const totalCookies = game.cookies + game.points * 1000; // Puntos basados en cookies totales
            document.getElementById('reincarnate').disabled = totalCookies < 1000;
            document.getElementById('reincarnate').textContent = `Reencarnar (${Math.floor(game.points)} puntos)`;
        }

        function reincarnate() {
            if (game.cookies >= 1000) {
                game.points += Math.floor(game.cookies / 1000);
                game.multi += game.points * 0.1;
                game.cookies = 0;
                Object.values(game.upgrades).forEach(up => {
                    up.qty = 0;
                    up.price = 15; // Reset precios iniciales para algunos
                });
                calculateCPS();
                updateDisplay();
                saveGame();
            }
        }

        // Loop principal
        calculateCPS();
        updateDisplay();
        setInterval(produceAuto, 1000); // Cada segundo
        setInterval(updateDisplay, 100); // Actualizar display fluido

        // Guardado autom치tico cada 30 seg
        setInterval(saveGame, 30000);
    </script>
</body>
</html>
